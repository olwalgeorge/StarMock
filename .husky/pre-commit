#!/usr/bin/env sh

echo "ğŸ” Running pre-commit checks..."

# Get the absolute path to the repository root
# When running from .git/hooks, we need to go up two levels
if [ -d ".git" ]; then
  # Running from repo root
  REPO_ROOT="$(pwd)"
else
  # Running from .git/hooks, go up two levels
  REPO_ROOT="$(cd "$(dirname -- "$0")/../.." && pwd)"
fi

# Change to app directory and run checks
cd "$REPO_ROOT/app"

# Run linting
echo "ğŸ¨ Running ESLint..."
npm run lint

# Run formatting check
echo "ğŸ’… Checking Prettier formatting..."
npm run format:check

# Run tests
echo "ğŸ§ª Running tests..."
npm test

echo "âœ… All pre-commit checks passed!"
